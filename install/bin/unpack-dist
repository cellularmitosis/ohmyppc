#!/bin/bash

dirname=$1
tarball=$2

set -e

mkdir -p $HOME/tmp
cd $HOME/tmp
rm -rf $dirname

if test "${tarball: -7}" == ".tar.gz" \
     -o "${tarball: -4}" == ".tgz"
then
    tar xzf $HOME/dist/$tarball
elif test "${tarball: -8}" == ".tar.bz2" \
       -o "${tarball: -5}" == ".tbz2" \
       -o "${tarball: -4}" == ".tbz"
then
    tar xjf $HOME/dist/$tarball
elif test "${tarball: -7}" == ".tar.xz" \
       -o "${tarball: -4}" == ".txz"
then
    cat $HOME/dist/$tarball | unxz | tar x
else
    echo "Error: don't know how to decompress $tarball" >&2
    exit 1
fi
